---
title: "Untitled"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.

```{r}
### This codes for violin plots which provide a visual for the frequncy of transects at a given depth. This code breaks down the given area into the MPA and reference sites, then subdivides into substrate types ###

### Load packages ###

library(tidyverse)
library(plyr)
library(dplyr)
library(yarrr)

### Load and subset data ###

data <- data.frame(read.csv("Habitat_densities_and_counts.csv"))
data <- subset(data, Designation == "MPA" | Designation == "Reference")

data <- mutate(data, neg_depth = Ave_Depth..m.*-1)
southern <- subset(data, Region == "South" | Region == "Channel Islands")
middle <- subset(data, Region == "Central" | Region == "North Central")
northern <- subset(data, Region == "North")

grp.mpa <- data %>%
  group_by_all() %>%
  mutate(newnames=paste0(MPA_Group))

split.mpa <- split(grp.mpa, grp.mpa$newnames)
for (I in 1:length(split.mpa)) {assign(unique(split.mpa[[I]]$newnames), split.mpa[[I]])}
```

```{r}
### Create a function to make a pirateplot ###

pirate <- function(x) {
  par(mar = c(5.1, 5, 4.1, 2.1))
  pirateplot(formula = neg_depth ~ Habitat_Type + Designation,
             data = x,
             ylab = "Depth (m)",
             xlab = "",
             main = x$MPA_Group[1],
             ylim = c(-140, 0),
             theme = 0,
             avg.line.o = 1,
             bean.f.o = 0.2,
             inf.b.o = 1,
             inf.f.o = 0,
             point.o = 0.3,
             point.pch = 21,
             point.cex = 0.7,
             jitter.val = .05)
}
```

```{r}
### Now load in any and all regions and MPAs ###

pirate(`Anacapa Island`)
pirate(`Ano Nuevo`)
pirate(`Big Creek`)
pirate(`Bodega Bay`)
pirate(`Campus Point`)
pirate(`Carrington Point`)
pirate(`Farallon Islands`)
pirate(Farnsworth)
pirate(`Gull Island`)
pirate(`Harris Point`)
pirate(`Pillar Point`)
pirate(`Point Arena`)
pirate(`Point Buchon`)
pirate(`Point Conception`)
pirate(`Point Lobos`)
pirate(`Point St. George`)
pirate(`Point Sur`)
pirate(`Portuguese Ledge`)
pirate(`Reading Rock`)
pirate(`Sea Lion Gulch`)
pirate(`South La Jolla`)
pirate(`South Point`)
pirate(`Swami's`)
pirate(`Ten Mile`)
pirate(northern)
pirate(middle)
pirate(southern)
```

